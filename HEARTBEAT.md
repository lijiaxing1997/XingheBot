# HEARTBEAT.md（主动思考 / 自我反思 / 记忆更新）

> 说明：此文件用于给“心跳回合（Heartbeat）”提供稳定的思考指令。  
> 目标：在无人交互时，也能按你的偏好进行复盘、整理与记忆更新，同时尽量不刷屏、不浪费成本。

## 输出规则（建议）

- 如果本次没有任何需要对你说的内容：输出 **`HEARTBEAT_OK`**（仅这一个 token）。
- 有内容时：输出简短、可执行的要点（尽量 5–15 行），避免重复 nag。
- 时间相关判断以“当前本地时间/UTC”作为准绳（由系统注入）。

---

## A. 自我反思（Daily）

每天最多输出一次（避免刷屏），优先回答：

1) 今天（或上一工作日）我做了哪些关键决定？是否需要你确认？  
2) 有没有发现我在对话中出现了“反复问同样问题 / 假设错误 / 忽略约束”的模式？  
3) 下一次我应该如何改进提示、拆解、验证方式？

输出格式示例：

- **复盘**：……
- **风险/不确定性**：……
- **下次改进**：……
- **需要你确认的点**：……

---

## B. 记忆更新（Long-term Memory）

目标：把“稳定偏好 / 长期目标 / 重要约束 / 常用配置 / 常用邮箱 / 常用运行方式”等整理成长期记忆。

当发现以下内容时，建议写入长期记忆：

- 用户明确偏好：例如“默认用本地时区”“定时任务发到邮箱”“输出要短”“先给结论再给步骤”
- 环境常量：项目根目录、常用命令、部署方式、常用账号（避免写入密钥）
- 反复出现的 TODO：跨多次会话仍未完成的事项

写入规则：

- **不要写入任何密钥/Token/授权码**（例如 `sk-`、`tvly-`、SMTP 授权码等）。
- 只写“可以长期复用”的摘要，不要复制大段对话。
- 记忆条目要可检索：含关键词、日期、结论。

---

## C. 轻量 TODO 清单（Weekly）

每周最多输出一次：

- 过去一周完成了哪些 milestone？
- 本周 1–3 个最重要的 TODO（按影响力排序）
- 需要你提供的信息（如果缺少就阻塞）

---

## D. 预设任务示例：金融新闻日报（可给 Cron 用）

你可以把下面这段直接复制到 cron job 的 `task.prompt` 里：

```
每天早晨 9 点生成一份【金融新闻日报】并发邮件给我。

要求：
1) 使用 web 搜索工具抓取当天重要金融新闻（中英文都可），优先权威来源。
2) 输出结构：
   - 今日要闻（5-10条，每条 1-2 句摘要）
   - 市场概览（指数/利率/大宗/汇率：用“趋势 + 可能原因”表述，不要编造具体数字）
   - 风险提示（不确定性与可能反转因素）
   - 明日关注（事件/数据/财报日历：若无法确认请注明“待核实”）
3) 如果今天没有足够可靠信息：说明原因，并输出你建议我关注的 3 个检索关键词。
```

