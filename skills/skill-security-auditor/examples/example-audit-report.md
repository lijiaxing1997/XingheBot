# æŠ€èƒ½å®‰å…¨å®¡è®¡æŠ¥å‘Šç¤ºä¾‹

## æŠ¥å‘Šä¿¡æ¯
- **æŠ¥å‘ŠID**: AUDIT-2024-001
- **ç”Ÿæˆæ—¶é—´**: 2024-01-15 14:30:00
- **å®¡è®¡å·¥å…·**: Skill Security Auditor v1.0.0
- **å®¡è®¡æŠ€èƒ½**: example-skill
- **æŠ€èƒ½è·¯å¾„**: /skills/example-skill

## æ‰§è¡Œæ‘˜è¦

æœ¬æ¬¡å®¡è®¡å¯¹`example-skill`æŠ€èƒ½è¿›è¡Œäº†å…¨é¢çš„å®‰å…¨åˆ†æã€‚å…±æ£€æŸ¥äº†8ä¸ªæ–‡ä»¶ï¼Œå‘ç°2ä¸ªä¸­é£é™©é—®é¢˜å’Œ3ä¸ªä½é£é™©é—®é¢˜ã€‚æ€»ä½“å®‰å…¨è¯„åˆ†ä¸º7/10ï¼Œé£é™©ç­‰çº§ä¸º**ä¸­ç­‰**ã€‚

**å…³é”®å‘ç°**ï¼š
1. ğŸ”´ **æ— é«˜é£é™©é—®é¢˜** - æœªå‘ç°ç«‹å³éœ€è¦ä¿®å¤çš„ä¸¥é‡å®‰å…¨é—®é¢˜
2. ğŸŸ¡ **2ä¸ªä¸­é£é™©é—®é¢˜** - éœ€è¦å…³æ³¨å’Œæ”¹è¿›çš„å®‰å…¨å®è·µ
3. ğŸŸ¢ **3ä¸ªä½é£é™©é—®é¢˜** - å»ºè®®ä¼˜åŒ–çš„å®‰å…¨é…ç½®
4. ğŸ”µ **å¤šé¡¹å®‰å…¨æœ€ä½³å®è·µ** - æŠ€èƒ½åœ¨å¤šä¸ªæ–¹é¢éµå¾ªäº†å®‰å…¨è§„èŒƒ

## æŠ€èƒ½æ¦‚å†µ

### åŸºæœ¬ä¿¡æ¯
- **æŠ€èƒ½åç§°**: example-skill
- **æ–‡ä»¶æ•°é‡**: 8ä¸ª
- **æ€»ä»£ç è¡Œæ•°**: çº¦450è¡Œ
- **ä¸»è¦è¯­è¨€**: Python
- **ä¾èµ–æ–‡ä»¶**: requirements.txt, config.yaml

### æ–‡ä»¶ç»“æ„
```
example-skill/
â”œâ”€â”€ SKILL.md
â”œâ”€â”€ main.py
â”œâ”€â”€ utils.py
â”œâ”€â”€ config.yaml
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ processor.py
â”‚   â””â”€â”€ validator.py
â””â”€â”€ tests/
    â””â”€â”€ test_basic.py
```

## å®¡è®¡å‘ç°

### ğŸŸ¡ ä¸­é£é™©é—®é¢˜ (2ä¸ª)

#### é—®é¢˜1: é…ç½®æ–‡ä»¶ä¸­çš„ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯
- **ä½ç½®**: `config.yaml:15`
- **é£é™©æè¿°**: é…ç½®æ–‡ä»¶ä¸­åŒ…å«ç¡¬ç¼–ç çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯
- **é£é™©ç­‰çº§**: ä¸­é£é™©
- **å½±å“**: å¦‚æœé…ç½®æ–‡ä»¶æ³„éœ²ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®åº“è®¿é—®æƒé™è¢«è·å–
- **ä»£ç ç‰‡æ®µ**:
  ```yaml
  database:
    host: "localhost"
    port: 5432
    username: "admin"      # ç¡¬ç¼–ç ç”¨æˆ·å
    password: "secret123"  # ç¡¬ç¼–ç å¯†ç 
    name: "skill_db"
  ```
- **ä¿®å¤å»ºè®®**:
  1. å°†æ•æ„Ÿä¿¡æ¯ç§»è‡³ç¯å¢ƒå˜é‡
  2. ä½¿ç”¨`.env`æ–‡ä»¶ç®¡ç†é…ç½®ï¼ˆä¸æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ï¼‰
  3. å®ç°é…ç½®åŠ å¯†æˆ–ä½¿ç”¨å¯†é’¥ç®¡ç†æœåŠ¡
- **ä¿®å¤ç¤ºä¾‹**:
  ```python
  # ä½¿ç”¨ç¯å¢ƒå˜é‡
  import os
  DB_USERNAME = os.getenv('DB_USERNAME', 'default_user')
  DB_PASSWORD = os.getenv('DB_PASSWORD', '')
  ```

#### é—®é¢˜2: æœªéªŒè¯çš„ç”¨æˆ·è¾“å…¥ç”¨äºæ–‡ä»¶è·¯å¾„
- **ä½ç½®**: `processor.py:42`
- **é£é™©æè¿°**: ç”¨æˆ·è¾“å…¥ç›´æ¥ç”¨äºæ„å»ºæ–‡ä»¶è·¯å¾„ï¼Œå­˜åœ¨è·¯å¾„éå†é£é™©
- **é£é™©ç­‰çº§**: ä¸­é£é™©
- **å½±å“**: æ”»å‡»è€…å¯èƒ½é€šè¿‡`../`åºåˆ—è®¿é—®ç³»ç»Ÿæ–‡ä»¶
- **ä»£ç ç‰‡æ®µ**:
  ```python
  def process_file(user_input):
      # ç”¨æˆ·è¾“å…¥ç›´æ¥ç”¨äºæ–‡ä»¶è·¯å¾„
      file_path = f"./data/{user_input}.txt"
      with open(file_path, 'r') as f:
          return f.read()
  ```
- **ä¿®å¤å»ºè®®**:
  1. éªŒè¯ç”¨æˆ·è¾“å…¥ï¼Œç§»é™¤`../`ç­‰å±é™©å­—ç¬¦
  2. ä½¿ç”¨ç™½åå•éªŒè¯æ–‡ä»¶æ‰©å±•å
  3. å°†æ–‡ä»¶è·¯å¾„é™åˆ¶åœ¨ç‰¹å®šç›®å½•å†…
- **ä¿®å¤ç¤ºä¾‹**:
  ```python
  import os
  import re
  
  def safe_process_file(user_input):
      # ç§»é™¤å±é™©å­—ç¬¦
      safe_input = re.sub(r'[./\\]', '', user_input)
      
      # é™åˆ¶æ–‡ä»¶æ‰©å±•å
      if not safe_input.endswith('.txt'):
          raise ValueError("Invalid file type")
      
      # ä½¿ç”¨ç»å¯¹è·¯å¾„é™åˆ¶ç›®å½•
      base_dir = os.path.abspath("./data")
      file_path = os.path.join(base_dir, safe_input)
      
      # éªŒè¯è·¯å¾„åœ¨å…è®¸çš„ç›®å½•å†…
      if not file_path.startswith(base_dir):
          raise ValueError("Invalid file path")
      
      with open(file_path, 'r') as f:
          return f.read()
  ```

### ğŸŸ¢ ä½é£é™©é—®é¢˜ (3ä¸ª)

#### é—®é¢˜3: è¿‡æ—¶çš„ä¾èµ–ç‰ˆæœ¬
- **ä½ç½®**: `requirements.txt`
- **é£é™©æè¿°**: ä½¿ç”¨çš„`requests`ç‰ˆæœ¬è¿‡æ—§ï¼Œå­˜åœ¨å·²çŸ¥å®‰å…¨æ¼æ´
- **é£é™©ç­‰çº§**: ä½é£é™©
- **å½±å“**: å¯èƒ½è¢«åˆ©ç”¨è¿›è¡ŒSSRFæ”»å‡»
- **å½“å‰ç‰ˆæœ¬**: `requests==2.20.0`
- **å»ºè®®ç‰ˆæœ¬**: `requests>=2.28.0`
- **ä¿®å¤å»ºè®®**: æ›´æ–°åˆ°æœ€æ–°ç¨³å®šç‰ˆæœ¬

#### é—®é¢˜4: è°ƒè¯•ä¿¡æ¯æ³„éœ²
- **ä½ç½®**: `utils.py:28`
- **é£é™©æè¿°**: é”™è¯¯å¤„ç†ä¸­å¯èƒ½æ³„éœ²å†…éƒ¨ä¿¡æ¯
- **é£é™©ç­‰çº§**: ä½é£é™©
- **ä»£ç ç‰‡æ®µ**:
  ```python
  except Exception as e:
      print(f"Error details: {e}")
      print(f"Full traceback: {traceback.format_exc()}")
  ```
- **ä¿®å¤å»ºè®®**: åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è®°å½•é”™è¯¯æ—¥å¿—ï¼Œè€Œä¸æ˜¯æ‰“å°å®Œæ•´å †æ ˆè·Ÿè¸ª

#### é—®é¢˜5: æœªè®¾ç½®æ–‡ä»¶æƒé™
- **ä½ç½®**: `scripts/validator.py:15`
- **é£é™©æè¿°**: åˆ›å»ºæ–‡ä»¶æ—¶æœªè®¾ç½®é€‚å½“çš„æƒé™
- **é£é™©ç­‰çº§**: ä½é£é™©
- **ä¿®å¤å»ºè®®**: ä½¿ç”¨`0o600`ç­‰é™åˆ¶æ€§æƒé™åˆ›å»ºæ•æ„Ÿæ–‡ä»¶

### ğŸ”µ å®‰å…¨æœ€ä½³å®è·µ (5é¡¹)

#### å®è·µ1: ä½¿ç”¨å®‰å…¨çš„å“ˆå¸Œå‡½æ•°
- **ä½ç½®**: `utils.py:55`
- **è¯´æ˜**: æ­£ç¡®ä½¿ç”¨`hashlib.sha256`è¿›è¡Œå¯†ç å“ˆå¸Œ
- **ä»£ç ç‰‡æ®µ**:
  ```python
  import hashlib
  import secrets
  
  def hash_password(password):
      salt = secrets.token_hex(16)
      hashed = hashlib.sha256((password + salt).encode()).hexdigest()
      return f"{salt}:{hashed}"
  ```

#### å®è·µ2: SQLå‚æ•°åŒ–æŸ¥è¯¢
- **ä½ç½®**: `main.py:89`
- **è¯´æ˜**: ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢é˜²æ­¢SQLæ³¨å…¥
- **ä»£ç ç‰‡æ®µ**:
  ```python
  cursor.execute(
      "SELECT * FROM users WHERE username = %s AND status = %s",
      (username, 'active')
  )
  ```

#### å®è·µ3: å®‰å…¨çš„éšæœºæ•°ç”Ÿæˆ
- **ä½ç½®**: `scripts/processor.py:33`
- **è¯´æ˜**: ä½¿ç”¨`secrets`æ¨¡å—ç”Ÿæˆå®‰å…¨éšæœºæ•°
- **ä»£ç ç‰‡æ®µ**:
  ```python
  import secrets
  token = secrets.token_urlsafe(32)
  ```

#### å®è·µ4: è¾“å…¥éªŒè¯
- **ä½ç½®**: `validator.py:22`
- **è¯´æ˜**: å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œä¸¥æ ¼çš„ç±»å‹å’ŒèŒƒå›´éªŒè¯
- **ä»£ç ç‰‡æ®µ**:
  ```python
  def validate_input(value, min_val=0, max_val=100):
      if not isinstance(value, (int, float)):
          raise TypeError("Value must be numeric")
      if not min_val <= value <= max_val:
          raise ValueError(f"Value must be between {min_val} and {max_val}")
      return True
  ```

#### å®è·µ5: å®‰å…¨çš„é»˜è®¤é…ç½®
- **ä½ç½®**: `config.yaml:5`
- **è¯´æ˜**: é…ç½®ä¸­è®¾ç½®äº†å®‰å…¨ç›¸å…³çš„é»˜è®¤å€¼
- **ä»£ç ç‰‡æ®µ**:
  ```yaml
  security:
    ssl_verify: true
    timeout: 30
    max_retries: 3
  ```

## æŠ€æœ¯è¯¦æƒ…

### æ–‡ä»¶åˆ†æç»Ÿè®¡
| æ–‡ä»¶ç±»å‹ | æ•°é‡ | å®‰å…¨æ£€æŸ¥ | å‘ç°é—®é¢˜ |
|---------|------|----------|----------|
| Pythonæ–‡ä»¶ | 5 | ä»£ç åˆ†æã€å¯¼å…¥æ£€æŸ¥ | 2ä¸ªé—®é¢˜ |
| é…ç½®æ–‡ä»¶ | 2 | æ•æ„Ÿä¿¡æ¯æ£€æŸ¥ | 1ä¸ªé—®é¢˜ |
| ä¾èµ–æ–‡ä»¶ | 1 | ç‰ˆæœ¬æ¼æ´æ£€æŸ¥ | 1ä¸ªé—®é¢˜ |
| æ–‡æ¡£æ–‡ä»¶ | 1 | ä¿¡æ¯æ³„éœ²æ£€æŸ¥ | 0ä¸ªé—®é¢˜ |

### ä»£ç è´¨é‡æŒ‡æ ‡
- **ä»£ç å¤æ‚åº¦**: ä¸­ç­‰ï¼ˆå¹³å‡åœˆå¤æ‚åº¦3.2ï¼‰
- **æ³¨é‡Šç‡**: 25%ï¼ˆè‰¯å¥½ï¼‰
- **å‡½æ•°é•¿åº¦**: å¹³å‡15è¡Œï¼ˆè‰¯å¥½ï¼‰
- **é”™è¯¯å¤„ç†**: åŸºæœ¬å®Œå–„ï¼Œæœ‰å¾…æ”¹è¿›

## é£é™©è¯„ä¼°

### é£é™©çŸ©é˜µ
| é£é™©ç±»å‹ | å¯èƒ½æ€§ | å½±å“ | é£é™©ç­‰çº§ |
|---------|--------|------|----------|
| æ•æ„Ÿä¿¡æ¯æ³„éœ² | ä¸­ | é«˜ | ä¸­é£é™© |
| è·¯å¾„éå†æ”»å‡» | ä½ | ä¸­ | ä¸­é£é™© |
| ä¾èµ–æ¼æ´åˆ©ç”¨ | ä½ | ä¸­ | ä½é£é™© |
| ä¿¡æ¯æ³„éœ² | ä½ | ä½ | ä½é£é™© |
| æƒé™é—®é¢˜ | ä½ | ä½ | ä½é£é™© |

### å½±å“åˆ†æ
1. **ä¸šåŠ¡å½±å“**: æœ‰é™ï¼ŒæŠ€èƒ½ä¸»è¦ç”¨äºå†…éƒ¨å·¥å…·
2. **æ•°æ®å½±å“**: å¯èƒ½æ³„éœ²é…ç½®ä¿¡æ¯ï¼Œä½†æ— ç”¨æˆ·æ•°æ®
3. **ç³»ç»Ÿå½±å“**: æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå¯èƒ½å—å½±å“
4. **å£°èª‰å½±å“**: æœ‰é™ï¼Œéå…¬å¼€äº§å“

## ä¿®å¤å»ºè®®

### ç«‹å³ä¿®å¤ (1å‘¨å†…)
1. **è¿ç§»æ•æ„Ÿé…ç½®**
   - å°†æ•°æ®åº“å‡­è¯ç§»è‡³ç¯å¢ƒå˜é‡
   - æ›´æ–°é…ç½®åŠ è½½é€»è¾‘
   - æµ‹è¯•æ–°çš„é…ç½®æ–¹å¼

2. **ä¿®å¤è·¯å¾„éå†æ¼æ´**
   - å®ç°å®‰å…¨çš„è·¯å¾„å¤„ç†å‡½æ•°
   - æ·»åŠ è¾“å…¥éªŒè¯æµ‹è¯•
   - æ›´æ–°ç›¸å…³æ–‡æ¡£

### çŸ­æœŸæ”¹è¿› (1ä¸ªæœˆå†…)
1. **æ›´æ–°ä¾èµ–ç‰ˆæœ¬**
   - æ›´æ–°`requests`åˆ°æœ€æ–°ç‰ˆæœ¬
   - æµ‹è¯•å…¼å®¹æ€§
   - æ›´æ–°`requirements.txt`

2. **æ”¹è¿›é”™è¯¯å¤„ç†**
   - å®ç°åˆ†çº§é”™è¯¯å¤„ç†
   - æ·»åŠ å®‰å…¨æ—¥å¿—è®°å½•
   - ç§»é™¤è°ƒè¯•ä¿¡æ¯æ³„éœ²

### é•¿æœŸåŠ å›º (3ä¸ªæœˆå†…)
1. **å®‰å…¨æµ‹è¯•é›†æˆ**
   - æ·»åŠ å®‰å…¨æµ‹è¯•ç”¨ä¾‹
   - é›†æˆè‡ªåŠ¨åŒ–å®‰å…¨æ‰«æ
   - å®šæœŸä¾èµ–æ¼æ´æ£€æŸ¥

2. **å®‰å…¨ç›‘æ§**
   - å®ç°å¼‚å¸¸è¡Œä¸ºæ£€æµ‹
   - æ·»åŠ å®‰å…¨äº‹ä»¶æ—¥å¿—
   - å®šæœŸå®‰å…¨å®¡è®¡

## æ€»ä½“å®‰å…¨è¯„åˆ†

### è¯„åˆ†è¯¦æƒ…
| è¯„åˆ†ç»´åº¦ | å¾—åˆ† | æƒé‡ | åŠ æƒå¾—åˆ† |
|---------|------|------|----------|
| APIå¯†é’¥å®‰å…¨ | 1/2 | 20% | 0.20 |
| å‘½ä»¤æ‰§è¡Œå®‰å…¨ | 2/2 | 20% | 0.40 |
| æ–‡ä»¶ç³»ç»Ÿå®‰å…¨ | 1/2 | 20% | 0.20 |
| ç½‘ç»œå®‰å…¨ | 2/2 | 20% | 0.40 |
| ä¾èµ–å®‰å…¨ | 1/2 | 20% | 0.20 |
| **æ€»åˆ†** | **7/10** | **100%** | **1.40** |

### å®‰å…¨ç­‰çº§
- **å½“å‰è¯„åˆ†**: 7/10
- **ç­‰çº§**: è‰¯å¥½
- **è¯´æ˜**: æŠ€èƒ½åŸºæœ¬å®‰å…¨ï¼Œä½†æœ‰æ”¹è¿›ç©ºé—´

### æ”¹è¿›ç›®æ ‡
- **çŸ­æœŸç›®æ ‡**: è¾¾åˆ°8/10ï¼ˆ1ä¸ªæœˆå†…ï¼‰
- **ä¸­æœŸç›®æ ‡**: è¾¾åˆ°9/10ï¼ˆ3ä¸ªæœˆå†…ï¼‰
- **é•¿æœŸç›®æ ‡**: è¾¾åˆ°10/10ï¼ˆæŒç»­æ”¹è¿›ï¼‰

## é™„å½•

### å®¡è®¡èŒƒå›´
æœ¬æ¬¡å®¡è®¡è¦†ç›–äº†ä»¥ä¸‹å†…å®¹ï¼š
1. æ‰€æœ‰Pythonæºä»£ç æ–‡ä»¶
2. é…ç½®æ–‡ä»¶ï¼ˆYAML, JSONï¼‰
3. ä¾èµ–å£°æ˜æ–‡ä»¶
4. æ–‡æ¡£æ–‡ä»¶ï¼ˆä»…å®‰å…¨æ£€æŸ¥ï¼‰

### æ–¹æ³•å­¦
å®¡è®¡é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š
1. **é™æ€ä»£ç åˆ†æ**: æ£€æŸ¥ä»£ç ä¸­çš„å®‰å…¨æ¨¡å¼
2. **é…ç½®å®¡æŸ¥**: åˆ†æé…ç½®æ–‡ä»¶ä¸­çš„æ•æ„Ÿä¿¡æ¯
3. **ä¾èµ–æ£€æŸ¥**: æ£€æŸ¥å·²çŸ¥æ¼æ´çš„ä¾èµ–åŒ…
4. **æ‰‹åŠ¨å®¡æŸ¥**: å…³é”®ä»£ç æ®µçš„äººå·¥åˆ†æ

### é™åˆ¶è¯´æ˜
1. **åŠ¨æ€è¡Œä¸º**: æœªæµ‹è¯•è¿è¡Œæ—¶è¡Œä¸º
2. **ç¯å¢ƒé…ç½®**: æœªè€ƒè™‘ç‰¹å®šéƒ¨ç½²ç¯å¢ƒ
3. **ç¬¬ä¸‰æ–¹é›†æˆ**: æœªæ·±å…¥æµ‹è¯•å¤–éƒ¨æœåŠ¡é›†æˆ
4. **é›¶æ—¥æ¼æ´**: æ— æ³•æ£€æµ‹æœªçŸ¥æ¼æ´

### åç»­æ­¥éª¤
1. å®æ–½æœ¬æŠ¥å‘Šä¸­çš„ä¿®å¤å»ºè®®
2. é‡æ–°å®¡è®¡ä¿®å¤åçš„ä»£ç 
3. å»ºç«‹æŒç»­çš„å®‰å…¨æ£€æŸ¥æµç¨‹
4. å®šæœŸæ›´æ–°å®‰å…¨å®¡è®¡è§„åˆ™

---
*æŠ¥å‘Šç»“æŸ*  
*ç”Ÿæˆæ—¶é—´: 2024-01-15 14:30:00*  
*å®¡è®¡å·¥å…·: Skill Security Auditor v1.0.0*